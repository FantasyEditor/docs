# 英雄升级 {docsify-ignore-all} 

所有[单位类型]为 **英雄** ，且 **不是幻象** 的单位会获得升级能力。

> 设置升级经验

使用[ac.game.set_level_exp]来设置升级所需要的经验，例如

```lua
ac.game:set_level_exp
{
    100,
    200,
    300,
}
```

表示从1级升级到2级需要100经验，2级升到3级需要200经验，3级升到4级需要300经验。此时[ac.game.max_level]会被设置为4，表示等级上限为4。以下功能只在等级上限大于0时对拥有升级能的单位有效。

> 单位初始化

单位在初始化时[等级]设为1级，[经验]设为0，[经验上限]设为1级升级到2级所需要的经验。

> 获得经验

先触发[单位-即将获得经验]事件，然后将获得的经验累加到单位的[经验]中。每当经验大于[经验上限]，便会扣除等同于经验上限的经验并提升一个等级，直到达到等级上限或经验小于经验上限。之后触发[单位-获得经验]事件。

> 提升等级

提升等级后，会将[经验上限]设置为当前等级提升到下个等级所需要的经验。如果当前等级已经是等级上限了，那么[经验上限]与[经验]都会被设置为0。之后会触发[单位-升级]事件。

[等级]: /ac/unit/attribute?id=等级
[经验]: /ac/unit/attribute?id=经验
[经验上限]: /ac/unit/attribute?id=经验上限
[单位类型]: /ac/unit/单位类型
[ac.game.set_level_exp]: /ac/api/game?id=set_level_exp
[ac.game.max_level]: /ac/api/game?id=max_level

[单位-即将获得经验]: 404
[单位-获得经验]: 404
[单位-升级]: 404
